[diff]
{{ if ne .chezmoi.os "windows" -}}
command = "delta"
pager = "delta"
{{- else -}}
command = "code"
args = ["--wait", "--diff"]
{{- end }}

[edit]
apply = false
watch = false
{{ if eq .chezmoi.os "windows" -}}
command = "code"
args = ["--wait"]
{{- end }}

[git]
autoAdd = true
autoCommit = true
# autoPush = true
refreshPeriod = "1h"

[merge]
{{ if ne .chezmoi.os "windows" -}}
command = "nvim"
args = [
    "-d",
    {{ printf "%q" "{{ .Destination }}" }},
    {{ printf "%q" "{{ .Source }}" }},
    {{ printf "%q" "{{ .Target }}" }},
]
# args = [
#     "-d",
#     "-c",
#     {{ printf "%q" "split {{ .Destination }} | vsplit {{ .Target }}" }},
#     {{ printf "%q" "{{ .Source }}" }},
# ]
{{- else -}}
command = "bash"
args = [
    "-c",
    "cp",
    {{ printf "%q" "{{ .Target }}" }},
    {{ printf "%q" "{{ .Target.base }}" }},
    "&&",
    "code",
    "--new-window",
    "--wait",
    "--merge",
    {{ printf "%q" "{{ .Destination }}" }},
    {{ printf "%q" "{{ .Target }}" }},
    {{ printf "%q" "{{ .Target.base }}" }},
    {{ printf "%q" "{{ .Source }}" }},
]
{{- end }}
