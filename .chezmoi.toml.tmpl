[diff]
{{ if ne .chezmoi.os "windows" -}}
command = "delta"
pager = "delta"
{{- else -}}
command = "code"
args = ["--wait", "--diff"]
{{- end }}

[edit]
apply = false
watch = false
{{ if eq .chezmoi.os "windows" -}}
command = "code"
args = ["--wait"]
{{- end }}

[git]
autoAdd = true
autoCommit = true
# autoPush = true

[merge]
{{ if ne .chezmoi.os "windows" -}}
command = "nvim"
args = [
    "-d",
    {{ printf "%q" "{{ .Destination }}" }},
    {{ printf "%q" "{{ .Source }}" }},
    {{ printf "%q" "{{ .Target }}" }},
]
# args = [
#   "-d",
#   "-o2",
#   {{ printf "%q" "{{ .Destination }}" }},
#   {{ printf "%q" "{{ .Target }}" }},
#   "-O",
#   {{ printf "%q" "{{ .Source }}" }},
# ]
{{- else -}}
command = "bash"
args = [
    "-c",
    "cp",
    {{ printf "%q" "{{ .Target }}" }},
    {{ printf "%q.base" "{{ .Target }}" }},
    "&&",
    "code",
    "--new-window",
    "--wait",
    "--merge",
    {{ printf "%q" "{{ .Destination }}" }},
    {{ printf "%q" "{{ .Target }}" }},
    {{ printf "%q.base" "{{ .Target }}" }},
    {{ printf "%q" "{{ .Source }}" }},
]
{{- end }}
